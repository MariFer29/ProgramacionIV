<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Auditoría</ion-title>

    <ion-buttons slot="end">
      <ion-button (click)="volver()">
        <ion-icon name="arrow-undo-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Filtros</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row>
          <ion-col size="12" size-md="3">
            <ion-item>
              <ion-label position="stacked">Desde</ion-label>
              <ion-input type="date" [(ngModel)]="fechaDesde"></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12" size-md="3">
            <ion-item>
              <ion-label position="stacked">Hasta</ion-label>
              <ion-input type="date" [(ngModel)]="fechaHasta"></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12" size-md="3">
            <ion-item>
              <ion-label position="stacked">Usuario ID</ion-label>
              <ion-input type="number" [(ngModel)]="usuarioId"></ion-input>
            </ion-item>
          </ion-col>

          <ion-col size="12" size-md="3">
            <ion-item>
              <ion-label position="stacked">Tipo de operación</ion-label>
              <ion-input [(ngModel)]="tipoOperacion" placeholder="Transferencia, AbrirCuenta..."></ion-input>
            </ion-item>
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-col size="12">
            <ion-button expand="block" (click)="buscar()">Buscar</ion-button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card-content>
  </ion-card>

  <ion-spinner *ngIf="loading" class="loading-spinner"></ion-spinner>

  <ion-card *ngIf="registros?.length">
    <ion-card-header>
      <ion-card-title>Resultados</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-grid>
        <ion-row class="tabla-header">
          <ion-col size="3"><strong>Fecha</strong></ion-col>
          <ion-col size="3"><strong>Usuario</strong></ion-col>
          <ion-col size="3"><strong>Operación</strong></ion-col>
          <ion-col size="3"><strong>Entidad</strong></ion-col>
        </ion-row>

        <ion-row *ngFor="let r of registros">
          <ion-col size="3">{{ r.fecha }}</ion-col>
          <ion-col size="3">{{ r.usuarioEmail }}</ion-col>
          <ion-col size="3">{{ r.tipoOperacion }}</ion-col>
          <ion-col size="3">{{ r.entidad }}</ion-col>
        </ion-row>
      </ion-grid>

    </ion-card-content>
  </ion-card>

  <ion-text *ngIf="!registros?.length && !loading">
    No hay resultados para mostrar.
  </ion-text>
</ion-content>